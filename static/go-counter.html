<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/bower_components/paper-card/paper-card.html">
<link rel="import" href="/static/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/static/bower_components/paper-icon-button/paper-icon-button.html">

<script src="/static/ajax.js"></script>

<dom-module id="go-counter">
	<style>
		paper-card {
			height: 300px;
			width: 300px;
			margin: 16px;
		}
		.counter {
			font-size: 120px;
			text-align: center;
		}
	</style>

	<template>
		<template is="dom-repeat" items="[[Counters]]">
			<paper-card heading="[[item.Name]]">
				<div class="card-content">
					<div>[[item.Desc]]</div>
					<div class="counter">[[item.Count]]</div>
				</div>
				<div class="card-actions">
					<paper-icon-button data-name="[[item.Name]]" icon="add" on-click="increment"></paper-icon-button>
					<paper-icon-button icon="remove" on-click="decrement"></paper-icon-button>
				</div>
			</paper-card>
		</template>
	</template>

	<script>
		Polymer({
			properties: {
				Counters: Array
			},
			ready: function() {
				that = this;
				ajax({
					url: '/get',
					method: 'GET',
					success: function(response) {
						that.Counters = JSON.parse(response);
					}
				});
			},
			increment: function(e) {
				console.log(e.target.getAttribute('data-name'));
				this.count++;
			},
			decrement: function() {
				this.count--;
			}
		});
	</script>
</dom-module>
